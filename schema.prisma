// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "postgresql"
}

generator client {
  provider = "prisma-client-js"
  output   = "node_modules/.prisma/client"
}

model User {
  id          String       @id @default(uuid()) @postgresql.Uuid
  name        String       @default("")
  email       String       @unique @default("")
  attendances Attendance[] @relation("Attendance_player")
}

model Social {
  id          String       @id @default(uuid()) @postgresql.Uuid
  title       String       @default("")
  date        DateTime?
  attendances Attendance[] @relation("Attendance_session")
}

model Attendance {
  id        String   @id @default(uuid()) @postgresql.Uuid
  session   Social?  @relation("Attendance_session", fields: [sessionId], references: [id])
  sessionId String?  @map("session") @postgresql.Uuid
  player    User?    @relation("Attendance_player", fields: [playerId], references: [id])
  playerId  String?  @map("player") @postgresql.Uuid
  payment   Payment? @relation("Attendance_payment", fields: [paymentId], references: [id])
  paymentId String?  @unique @map("payment") @postgresql.Uuid

  @@index([sessionId])
  @@index([playerId])
}

model Payment {
  id          String      @id @default(uuid()) @postgresql.Uuid
  amount      Int?
  attendances Attendance? @relation("Attendance_payment")
}